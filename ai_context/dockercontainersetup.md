How to Set Up Supabase with Docker for Self-HostingThis guide will walk you through setting up a complete Supabase environment on your local machine using Docker. This setup includes the database, authentication, storage, and the Supabase Studio dashboard.1. PrerequisitesBefore you begin, make sure you have the following installed on your system:Docker: The containerization platform.Docker Compose: The tool for defining and running multi-container Docker applications.Git: For cloning the necessary configuration files.2. Clone the ConfigurationThe easiest way to get started is by using the official Supabase example. Open your terminal and clone the repository:git clone https://github.com/supabase/supabase.git
Navigate into the Docker directory:cd supabase/docker
Inside this directory, you will find the docker-compose.yml file and an example configuration file.3. Create Your Configuration FileSupabase uses a .env file to manage all the secret keys and passwords for the different services. Copy the example file to create your own:cp .env.example .env
Now, open the newly created .env file in a text editor. You need to fill in the placeholder values.Key variables to update:POSTGRES_PASSWORD: Create a strong, secure password for your database.JWT_SECRET: This is used to sign JSON Web Tokens for authentication. It must be a long, random string.ANON_KEY: This is the public-facing key for your API.SERVICE_ROLE_KEY: This is the secret key for your API that bypasses row-level security.How to Generate Secure Keys:You can generate secure, random strings for the JWT_SECRET, ANON_KEY, and SERVICE_ROLE_KEY using openssl or any other password generator. For example:# For JWT_SECRET (a long, complex secret)
openssl rand -hex 64

# For ANON_KEY and SERVICE_ROLE_KEY (these are typically long JWTs, but a random string works for local dev)
openssl rand -hex 32
Copy the generated values into your .env file.4. Start the Supabase StackOnce your .env file is configured, you can start all the Supabase services using Docker Compose. In the supabase/docker directory, run:docker-compose up -d
The -d flag runs the containers in detached mode, meaning they will run in the background.This command will download all the necessary Docker images and start the containers. This might take a few minutes the first time you run it.5. Access Supabase Studio (Your Local Dashboard)After the containers have started, you can access your local Supabase dashboard. Open your web browser and navigate to:http://localhost:3000You should see the Supabase Studio interface. This is your private, local version of the Supabase dashboard, where you can manage your database, users, storage, and API.6. Find Your API KeysTo connect your application to your new local Supabase instance, you'll need the URL and API keys.In Supabase Studio (at http://localhost:3000), click on the Settings icon in the left sidebar.Select the API page.Here you will find:Project URL: http://localhost:8000API Keys: The anon (public) key and the service_role (secret) key. These should match the values you set in your .env file.Use these credentials in your application's Supabase client to interact with your self-hosted backend.7. Stopping the EnvironmentWhen you are finished working, you can stop all the running containers with the following command:docker-compose down
This will stop and remove the containers. If you want to remove the database volume as well (deleting all your data), you can run docker-compose down -v.
